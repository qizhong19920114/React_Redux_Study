<!DOCTYPE html>
<html lang="en`">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>React - Tutorial</title>
    <link rel ="stylesheet" type="text/css" href="../../css/main_five_examples.css">
    <script src="../../js/react.min.js"></script>
    <script src="../../js/react-dom.min.js"></script>
    <script src="../../js/browser.min.js"></script>
</head>
<body>

    <div id="container"></div>

    <script type="text/babel">
    // This is more complex example that uses two components -
    // a service chooser form, and the individual services inside it.

    // This is the parent component
    var ServiceChooser = React.createClass({

        getInitialState: function(){
            return { total: 0 };
        },

        addTotal: function( price ){
            this.setState( { total: this.state.total + price } );
        },

        render: function() {

            var self = this;

            var services = this.props.items.map(function(s){

                // Create a new Service component for each item in the items array.
                // Notice that I pass the self.addTotal function to the component.

                return <Service name={s.name} price={s.price} active={s.active} addTotal={self.addTotal} />;
            });
            // use {services} to call the service function; interesting. I can totally move the callback function into the div and surrand it by {}; but write
            // them somewhere else is more neat.  
            // the dollar sign below is not jquery, it's just for price. lol. 
            return <div>
                        <h1>Our services</h1>
                        
                        <div id="services">
                            {services}

                            <p id="total">Total <b>${this.state.total.toFixed(2)}</b></p>

                        </div>

                    </div>;

        }
    });


    var Service = React.createClass({

        getInitialState: function(){
            return { active: false };
        },

        clickHandler: function (){

            var active = !this.state.active;

            this.setState({ active: active });
            
            // Notify the ServiceChooser, by calling its addTotal method
            this.props.addTotal( active ? this.props.price : -this.props.price );

        },

        render: function(){

            return  <p className={ this.state.active ? 'active' : '' } onClick={this.clickHandler}>
                        {this.props.name} <b>${this.props.price.toFixed(2)}</b>
                    </p>;

        }

    });


    var services = [
        { name: 'Web Development', price: 300 },
        { name: 'Design', price: 400 },
        { name: 'Integration', price: 250 },
        { name: 'Training', price: 220 }
    ];


    // Render the ServiceChooser component, and pass the array of services

    ReactDOM.render(
        <ServiceChooser items={ services } />,
        document.getElementById('container')
    );

    </script>

</body>
</html>



<!-- you make component make sure you only use one div (or one parent component) --> 
